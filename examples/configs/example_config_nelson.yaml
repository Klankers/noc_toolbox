# Pipeline Configuration
pipeline:
  name: "Data Processing Pipeline"
  description: "A pipeline for processing and analyzing multi-dimensional data"
  visualisation: false  # Enable visualisation of the pipeline
# Steps in the pipeline
steps:
  # - name: "Load OG1"
  #   parameters:
  #     file_path: "../../examples/data/OG1/Nelson_646_R.nc" # Path to the input NetCDF file
  #     add_meta: false # Add metadata to the data
  #     add_elapsed_time: false
  #     add_dev_cols: false 
  #   diagnostics: false  # Enable diagnostics
  - name: "Load OG1"
    parameters:
      file_path: "/home/aaron-mau/Code/NOC-toolbox/mau/noc_toolbox/data/sea045_20230530T0832_delayed.nc" # Path to the input NetCDF file
      add_meta: false # Add metadata to the data
      add_elapsed_time: false
      add_dev_cols: false 
    diagnostics: false  # Enable diagnostics

  - name: "Derive CTD"
    parameters:
      conductivity_unit_conversion_factor: 1
      pressure_unit_conversion_factor: 1
      latitude_longitude_conversion_factor: 1
      interpolate_latitude_longitude: true
      to_derive: [  # Derives the variables listed below. You may choose to use a subset
        "DEPTH",  # Reccomended as Find Profiles is designed to use DEPTH, but will work with PRES as well
        "PRAC_SALINITY",
        "ABS_SALINITY",
        "CONS_TEMP",
        "DENSITY"
      ]
    diagnostics: true
  
  - name: "Find Profiles"
    parameters:
      gradient_thresholds: [0.02, -0.02]
      filter_window_sizes: ["10s", "20s"]
      depth_column: "DEPTH"
    diagnostics: false

  # - name: "ADJ: Salinity"
  #   parameters:
  #     CTLag: True
  #     ThermalLag: True
  #     windowLength: 21 # Length of the window for QC
  #   diagnostics: true  # Enable diagnostics for QC step

  - name: "Data Export"
    parameters:
      export_format: "hdf5"  # Define the export format (e.g., OG1, CSV, etc.)
      output_path: "../../examples/data/OG1/exported_Nelson_646_R.nc"
    diagnostics: false  # Disable diagnostics for export step
